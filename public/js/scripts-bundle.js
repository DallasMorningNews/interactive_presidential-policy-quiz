$(document).ready(function(){function e(e,n){$.each(o,function(i,a){if(n===a.cat){var o=i;$("#"+n).find("h4").text("For "+c[e]+": "+a.questions[e].question);var s=_.shuffle(a.questions[e].answer_group);$.each(s,function(e,t){$("#"+n).find(".answer-block").append("<li>"+s[e]+"</li>")}),$("#"+n).find("h5").fadeOut(500),$("#"+n).find(".point-values").fadeOut(500,function(){$("#"+n).find("h4").fadeIn(500),$("#"+n).find(".answer-block").fadeIn(500)}),$("#"+n).find(".answer-block li").bind("click",function(){var i=$(this).text();$(this).addClass("selected"),$("#"+n).find(".answer-block li").unbind("click"),t(o,e,i)})}})}function t(e,t,i){console.log(e,t,i);var a=o[e].cat;i===o[e].questions[t].correct_answer?(d+=t+1,$("<p class='response'><span class='right-wrong'>Right. </span>"+_.capitalize(c[t])+" to your candidate.</p>").insertBefore($("#"+a+" .read-more")),f["q"+(e+1)]=t+1,f.total+=t+1,$.post("http://apps.dallasnews.com/livewire/presidential-policy-quiz/update/"+s,f,function(){console.log("Success!")}).fail(function(){console.log("Whoops, something bad happened!")}).done(function(e){n(e),updateReadouts(e)})):$("<p class='response'><span class='right-wrong'>Thatâ€™s incorrect. </span> The right answer is "+o[e].questions[t].correct_answer+"</p>").insertBefore($("#"+a+" .read-more")),$(".response").append(" "+o[e].questions[t].explainer),$("#"+a).find(".read-more").removeClass("no-show")}function n(e){r=0,l=0,u=0,p=0;var t=0;$.each(e,function(e,t){"Hillary Clinton"===t.candidate?(r++,u+=t.total):"Donald Trump"===t.candidate&&(l++,p+=t.total)}),t=u+p,clintonPercentage=u/t*100,trumpPercentage=p/t*100,u=Number(u).toLocaleString("en"),p=Number(p).toLocaleString("en"),console.log(clintonPercentage,trumpPercentage),$("#clinton-score").text(u),$("#trump-score").text(p),$("#clinton-read-out figure").css("left",clintonPercentage+"%"),$("#trump-read-out figure, #trump-read-out .read-out").css("left",trumpPercentage+"%"),$("#clinton-read-out .read-out").css("width",clintonPercentage+"%").text(u),$("#trump-read-out .read-out").css("width",trumpPercentage+"%").text(p),$("#points-contributed").text(d)}var i=new Date,a=i.getFullYear();$(".copyright").text(a);var o,s,c=["one point","two points","three points"],d=0,r=0,l=0,u=0,p=0;$.getJSON("js/data.json",function(e){o=e});var f={candidate:"",q1:0,q2:0,q3:0,q4:0,total:0};$(".candidate-mug").bind("click",function(){$("#candidates").addClass("candidate-picked"),$("#candidates h4").text("Total points"),f.candidate=$(this).attr("alt"),$.post("http://apps.dallasnews.com/livewire/presidential-policy-quiz",f,function(){console.log("Success!")}).fail(function(){console.log("Whoops, something bad happened!")}).done(function(e){console.log(e),s=e.id,$.getJSON("http://apps.dallasnews.com/livewire/presidential-policy-quiz",function(e){n(e),updateReadouts(e)})}),$(".candidate-mug").unbind("click"),setTimeout(function(){$(".candidate-score").fadeIn("500")},500),$(this).addClass("picked").parent("figure").siblings("figure").children("img").addClass("not-picked"),setTimeout(function(){$("#questions").css("opacity",1),$("#read-outs").slideDown(500)},500),$(this).hasClass("dem-mug")?$("#quiz-block").addClass("dem-choice"):$("#quiz-block").addClass("rep-choice")}),$(".point-values li").click(function(){if($("#candidates").hasClass("candidate-picked")===!1)return void alert("Please select a candidate");var t=$(this).index(),n=$(this).closest(".question-block").attr("id");e(t,n)});var g;$(window).scroll(function(){console.log(g),void 0===g&&(g=$("#candidates").offset().top);var e=$(window).scrollTop(),t=$("#questions").height(),n=$("#questions").offset().top;e>g&&e<n+t&&$("#candidates").hasClass("candidate-picked")===!0?($(".candidate-picked").addClass("sticky"),$("#questions").css("padding-top","100px")):($(".candidate-picked").removeClass("sticky"),$("#questions").css("padding-top","40px"))})});
//# sourceMappingURL=scripts-bundle.js.map
