$(document).ready(function(){function e(e,n){$.each(i,function(o,a){if(n===a.cat){var s=o;$("#"+n).find("h4").text("For "+d[e]+": "+a.questions[e].question);var i=_.shuffle(a.questions[e].answer_group);$.each(i,function(e,t){$("#"+n).find(".answer-block").append("<li>"+i[e]+"</li>")}),$("#"+n).find("h5").fadeOut(500),$("#"+n).find(".point-values").fadeOut(500,function(){$("#"+n).find("h4").fadeIn(500),$("#"+n).find(".answer-block").fadeIn(500)}),$("#"+n).find(".answer-block li").bind("click",function(){var o=$(this).text();$(this).addClass("selected"),$("#"+n).find(".answer-block li").unbind("click"),t(s,e,o)})}})}function t(e,t,o){console.log(e,t,o);var a=i[e].cat;o===i[e].questions[t].correct_answer?($("#quiz-block").hasClass("dem-choice")===!0?$("#clinton-block").addClass("dem-correct-answer"):$("#trump-block").addClass("rep-correct-answer"),l+=t+1,$("<p class='response'><span class='correct'><i class='fa fa-check'></i> Right.</span> "+_.capitalize(d[t])+" to your candidate. "+i[e].questions[t].explainer+"</p>").insertBefore($("#"+a+" .read-more")),m["q"+(e+1)]=t+1,m.total+=t+1,$.post("http://apps.dallasnews.com/livewire/presidential-policy-quiz/update/"+c,m,function(){console.log("Success!")}).fail(function(){console.log("Whoops, something bad happened!")}).done(function(e){n(e)})):$("<p class='response'><span class='incorrect'><i class='fa fa-times'></i> Thatâ€™s incorrect. </span> The right answer is "+i[e].questions[t].correct_answer+". "+i[e].questions[t].explainer+"</p>").insertBefore($("#"+a+" .read-more")),$("#"+a).find(".read-more").removeClass("no-show")}function n(e){r=0,u=0,p=0,f=0;var t=0;$.each(e,function(e,t){"Hillary Clinton"===t.candidate?(r++,p+=t.total):"Donald Trump"===t.candidate&&(u++,f+=t.total)}),t=p+f,clintonPercentage=p/t*100,trumpPercentage=f/t*100,p=Number(p).toLocaleString("en"),f=Number(f).toLocaleString("en"),console.log(clintonPercentage,trumpPercentage),$("#clinton-score").text(p),$("#trump-score").text(f),$("#clinton-read-out figure").css("left",clintonPercentage+"%"),$("#trump-read-out figure, #trump-read-out .read-out").css("left",trumpPercentage+"%"),$("#clinton-read-out .read-out").css("width",clintonPercentage+"%").text(p),$("#trump-read-out .read-out").css("width",trumpPercentage+"%").text(f),$("#points-contributed").text(l)}function o(){$("#candidate-modal").fadeOut(500),setTimeout(function(){$("body").removeClass("no-scroll"),$("#content").removeClass("modal-display")},500)}var a=new Date,s=a.getFullYear();$(".copyright").text(s);var i,c,d=["one point","two points","three points"],l=0,r=0,u=0,p=0,f=0;$.getJSON("js/data.json",function(e){i=e});var m={candidate:"",q1:0,q2:0,q3:0,q4:0,total:0};$(".candidate-mug").bind("click",function(){o(),$("#candidates").addClass("candidate-picked"),$("#candidates h4").text("Total points"),m.candidate=$(this).attr("alt"),$.post("http://apps.dallasnews.com/livewire/presidential-policy-quiz",m,function(){console.log("Success!")}).fail(function(){console.log("Whoops, something bad happened!")}).done(function(e){console.log(e),c=e.id,$.getJSON("http://apps.dallasnews.com/livewire/presidential-policy-quiz",function(e){n(e)})}),$(".candidate-mug").unbind("click"),setTimeout(function(){$(".candidate-score-block p").fadeIn("500")},500),setTimeout(function(){$("#questions").css("opacity",1),$("#read-outs").slideDown(500)},500),$(this).hasClass("dem-mug")?$("#quiz-block").addClass("dem-choice"):$("#quiz-block").addClass("rep-choice")}),$(".point-values li").click(function(){if($(".candidate-score-block").removeClass("dem-correct-answer rep-correct-answer"),$("#candidates").hasClass("candidate-picked")===!1)return $("body").addClass("no-scroll"),$("article").addClass("modal-display"),void setTimeout(function(){$("#candidate-modal").fadeIn(500)},250);var t=$(this).index(),n=$(this).closest(".question-block").attr("id");e(t,n)});var h;$(window).scroll(function(){console.log(h),void 0===h&&(h=$("#candidates").offset().top);var e=$(window).scrollTop();$("#questions").height(),$("#questions").offset().top;e>h&&$("#candidates").hasClass("candidate-picked")===!0?($(".candidate-picked").addClass("sticky"),$("#questions").css("padding-top","100px")):($(".candidate-picked").removeClass("sticky"),$("#questions").css("padding-top","40px"))}),$(".close").click(function(){o()})});
//# sourceMappingURL=scripts-bundle.js.map
