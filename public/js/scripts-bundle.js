$(document).ready(function(){function n(n,i){$.each(o,function(t,s){if(i===s.cat){var o=t;$("#"+i).find("h4").text("For "+c[n]+": "+s.questions[n].question);var a=_.shuffle(s.questions[n].answer_group);$.each(a,function(n,e){$("#"+i).find(".answer-block").append("<li>"+a[n]+"</li>")}),$("#"+i).find("h5").fadeOut(500),$("#"+i).find(".point-values").fadeOut(500,function(){$("#"+i).find("h4").fadeIn(500),$("#"+i).find(".answer-block").fadeIn(500)}),$("#"+i).find(".answer-block li").bind("click",function(){var t=$(this).text();$(this).addClass("selected"),$("#"+i).find(".answer-block li").unbind("click"),e(o,n,t)})}})}function e(n,e,t){console.log(n,e,t);var s=o[n].cat;t===o[n].questions[e].correct_answer?($("<p class='response'><span class='right-wrong'>Right. </span>"+_.capitalize(c[e])+" to your candidate.</p>").insertBefore($("#"+s+" .read-more")),p["q"+(n+1)]=e+1,p.total+=e+1,$.post("http://apps.dallasnews.com/livewire/presidential-policy-quiz/update/"+a,p,function(){console.log("Success!")}).fail(function(){console.log("Whoops, something bad happened!")}).done(function(n){i(n)})):$("<p class='response'><span class='right-wrong'>Thatâ€™s incorrect. </span> The right answer is: "+o[n].questions[e].correct_answer+"</p>").insertBefore($("#"+s+" .read-more")),$("#"+s).find(".read-more").removeClass("no-show")}function i(n){d=0,l=0,r=0,u=0,$.each(n,function(n,e){"Hillary Clinton"===e.candidate?(d++,r+=e.total):"Donald Trump"===e.candidate&&(l++,u+=e.total)}),console.log(d,r,l,u),$("#clinton-score").text(r),$("#trump-score").text(u)}var t=new Date,s=t.getFullYear();$(".copyright").text(s);var o,a,c=["one point","two points","three points"],d=0,l=0,r=0,u=0;$.getJSON("js/data.json",function(n){o=n});var p={candidate:"",q1:0,q2:0,q3:0,q4:0,total:0};$(".candidate-mug").bind("click",function(){$("#candidates").addClass("candidate-picked"),$("#candidates h4").text("Total points"),p.candidate=$(this).attr("alt"),$.post("http://apps.dallasnews.com/livewire/presidential-policy-quiz",p,function(){console.log("Success!")}).fail(function(){console.log("Whoops, something bad happened!")}).done(function(n){console.log(n),a=n.id,$.getJSON("http://apps.dallasnews.com/livewire/presidential-policy-quiz",function(n){i(n)})}),$(".candidate-mug").unbind("click"),setTimeout(function(){$(".candidate-score").fadeIn("500")},500),$(this).addClass("picked").parent("figure").siblings("figure").children("img").addClass("not-picked"),setTimeout(function(){$("#questions").slideDown(500)},500),$(this).hasClass("dem-mug")?$("#quiz-block").addClass("dem-choice"):$("#quiz-block").addClass("rep-choice")}),$(".point-values li").click(function(){var e=$(this).index(),i=$(this).closest(".question-block").attr("id");n(e,i)});var f=$("#candidates").offset().top;$(window).scroll(function(){var n=$(window).scrollTop(),e=$("#questions").height(),i=$("#questions").offset().top;console.log(n,f,i+e),n>f&&n<i+e?($("#candidates").addClass("sticky"),$("#questions").css("padding-top","130px")):($("#candidates").removeClass("sticky"),$("#questions").css("padding-top","0"))})});
//# sourceMappingURL=scripts-bundle.js.map
